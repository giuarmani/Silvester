<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Silvester Está Alone</title>
    <link rel="manifest" href="manifest.json">
    <style>
        /* DESIGN PREMIUM ESTRUTURADO (CSS INTERNO PARA RODAR OFFLINE) */
        body { background-color: #0f172a; color: #f8fafc; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; margin: 0; padding-bottom: 30px; }
        
        header { padding: 25px 10px 10px; text-align: center; background: #0f172a; }
        header h1 { font-size: 24px; font-weight: 900; text-transform: uppercase; font-style: italic; margin: 0; letter-spacing: -1px; }
        header .emerald { color: #10b981; }
        header p { font-size: 10px; color: #64748b; font-weight: bold; letter-spacing: 2px; text-transform: uppercase; margin-top: 4px; }

        nav { position: sticky; top: 0; z-index: 50; background: rgba(15, 23, 42, 0.95); backdrop-filter: blur(10px); border-bottom: 1px solid #1e293b; display: flex; }
        nav button { flex: 1; padding: 18px 5px; background: none; border: none; color: #64748b; font-weight: 900; font-size: 11px; cursor: pointer; border-bottom: 4px solid transparent; transition: 0.3s; }
        
        /* Cores das Abas Ativas conforme seu pedido */
        nav button.active-bulario { border-bottom-color: #a855f7; color: #a855f7; }
        nav button.active-calculadora { border-bottom-color: #f97316; color: #f97316; }
        nav button.active-premium { border-bottom-color: #94a3b8; color: #94a3b8; }

        .tab-content { display: none; padding: 15px; animation: fadeIn 0.3s ease; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .active-content { display: block; }

        input { width: 100%; padding: 14px; border-radius: 15px; background: #1e293b; border: 1px solid #334155; color: white; box-sizing: border-box; outline: none; font-size: 16px; transition: 0.2s; }
        input:focus { border-color: #a855f7; box-shadow: 0 0 0 2px rgba(168, 85, 247, 0.2); }
        #busca { border-color: rgba(168, 85, 247, 0.3); margin-bottom: 20px; }

        .card { background: #1e293b; border-radius: 24px; border-left: 10px solid #a855f7; padding: 18px; margin-bottom: 15px; box-shadow: 0 10px 20px rgba(0,0,0,0.2); border-top: 1px solid rgba(255,255,255,0.05); }
        .card h3 { margin: 0; color: #a855f7; text-transform: uppercase; font-style: italic; font-size: 20px; font-weight: 900; }
        .animal-tag { font-size: 11px; background: rgba(168, 85, 247, 0.2); color: #e9d5ff; padding: 5px 10px; border-radius: 8px; font-weight: 900; border: 1px solid rgba(168, 85, 247, 0.2); }
        
        .info-row { font-size: 10px; color: #94a3b8; font-weight: bold; text-transform: uppercase; border-bottom: 1px solid #334155; padding-bottom: 8px; margin: 8px 0; }
        .dose-ref { font-size: 11px; color: #d8b4fe; font-weight: bold; margin-bottom: 10px; }

        .grid-inputs { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-top: 15px; }
        .full-col { grid-column: span 2; }
        label { font-size: 9px; font-weight: 900; text-transform: uppercase; color: #64748b; margin-left: 5px; margin-bottom: 4px; display: block; }
        
        .res-box { background: rgba(168, 85, 247, 0.1); border: 1px solid rgba(168, 85, 247, 0.2); border-radius: 18px; text-align: center; display: flex; flex-direction: column; justify-content: center; padding: 5px; }
        .res-val { font-size: 18px; font-weight: 900; color: white; font-family: monospace; }
        
        .dica { grid-column: span 2; font-size: 9px; color: rgba(168, 85, 247, 0.6); font-style: italic; border-top: 1px solid #334155; padding-top: 8px; margin-top: 5px; }
        
        /* Estilo Calculadora Laranja */
        .card-orange { border-top: 8px solid #f97316; border-left: none; }
        .btn-orange { background: #ea580c; width: 100%; border: none; padding: 18px; border-radius: 15px; color: white; font-weight: 900; cursor: pointer; margin-top: 15px; font-size: 14px; }
        
        /* Estilo Premium Cinza */
        .premium-box { border: 2px dashed #334155; border-radius: 40px; padding: 60px 20px; text-align: center; margin-top: 20px; }
    </style>
</head>
<body>

    <header>
        <h1>SILVESTER <span class="emerald">ESTÁ</span> ALONE</h1>
        <p>Veterinary Offline Support</p>
    </header>

    <nav>
        <button id="btn-bulario" class="active-bulario" onclick="mudarAba('bulario')">BULÁRIO</button>
        <button id="btn-calculadora" onclick="mudarAba('calculadora')">CALC</button>
        <button id="btn-premium" onclick="mudarAba('premium')">PROTOCOLOS</button>
    </nav>


    <!-- ABA 1: BULÁRIO (ROXO) -->
    <main id="bulario" class="tab-content active-content">
        <input type="text" id="busca" oninput="filtrarBulario()" placeholder="Buscar Animal ou Fármaco...">
        <div id="lista-bulario"></div>
    </main>

    <!-- ABA 2: CALCULADORA (LARANJA) -->
    <main id="calculadora" class="tab-content">
        <div class="card card-orange">
            <h2 style="color:#f97316; margin-top:0; font-weight: 900; font-style: italic;">CÁLCULO LIVRE</h2>
            <label>Peso do Animal (kg)</label>
            <input type="number" id="pesoG" step="0.001" placeholder="0.300">
            <div class="grid-inputs">
                <div>
                    <label>Dose (mg/kg)</label>
                    <input type="number" id="doseG" placeholder="10">
                </div>
                <div>
                    <label>Conc (mg/ml)</label>
                    <input type="number" id="concG" placeholder="5">
                </div>
            </div>
            <button class="btn-orange" onclick="calcGeral()">CALCULAR VOLUME</button>
            <div id="resGeralCont" style="display:none; margin-top: 20px; text-align: center; background: #0f172a; padding: 20px; border-radius: 20px; border: 1px solid #f9731633;">
                <label style="color:#f97316">Volume Total</label>
                <div id="resGeral" style="font-size:36px; font-weight:900; color:white;">0.000 <span style="font-size:16px; color:#f97316">ml</span></div>
            </div>
        </div>
    </main>

    <!-- ABA 3: PREMIUM (CINZA) -->
    <main id="premium" class="tab-content">
        <div class="premium-box">
           
            <h2 style="color: #94a3b8; font-weight: 900;">MEUS PROTOCOLOS</h2>
            <p style="color: #64748b; font-size: 14px;">Em breve: Banco de dados customizado para suas próprias doses.</p>
        </div>
    </main>

    <script>
        // COLE SUA LISTA DA PLANILHA1 ABAIXO
        const minhaPlanilha = [
            {
      "Animal": "Iguanas e Lagartos",
      "Medicação": "Diazepan",
      "Dose/mg/kg": "2,5 IM",
      "doseMin": 2.5,
      "Uso": "Anestésico",
      "Notas": "convulsão/ MPA/ 20 min antes"
    },
    {
      "Animal": "Iguanas e Lagartos",
      "Medicação": "Diazepan",
      "Dose/mg/kg": "0,2 - 1 IM",
      "doseMin": 0.2,
      "doseMax": 1,      
      "Uso": "Anestésico",
      "Notas": "Associado com cetamina"
    },
    {
      "Animal": "Iguanas e Lagartos",
      "Medicação": "Midazolam",
      "Dose/mg/kg": "2 IM",
      "doseMin": 2,
      "Uso": "Anestésico",
      "Notas": "Associado com cetamina"
    },
    {
      "Animal": "Iguanas e Lagartos",
      "Medicação": "Cetamina",
      "Dose/mg/kg": "30 - 50 IM",
      "doseMin": 30,
      "doseMax": 50,
      "Uso": "Anestésico",
      "Notas": "Indução e recuperação lenta - associar"
    },
    {
      "Animal": "Iguanas e Lagartos",
      "Medicação": "Meloxicam",
      "Dose/mg/kg": "0,2 IM IV",
      "doseMin": 0.2,
      "Uso": "Analgésico/Antiiinf.",
      "Notas": "24h",
      "Concentração": 2 
    },
    {
      "Animal": "Iguanas e Lagartos",
      "Medicação": "Cetoprofeno",
      "Dose/mg/kg": "2 IM SC",
      "doseMin": 2, 
      "Uso": "Analgésico/Antiiinf.",
      "Notas": "24h"
    },
    {
      "Animal": "Iguanas e Lagartos",
      "Medicação": "Dipirona",
      "Uso": "Analgésico/Antiiinf."
    },
    {
      "Animal": "Serpentes",
      "Medicação": "Acepromazina",
      "Dose/mg/kg": "0,1 - 0,5 IM",
      "doseMin": 0.1,
      "doseMax": 0.5,
      "Uso": "Anestésico",
      "Notas": "MPA"
    },
    {
      "Animal": "Serpentes",
      "Medicação": "Cetamina",
      "Dose/mg/kg": "60 IM SC IV",
      "doseMin": 60,
      "Uso": "Anestésico",
      "Notas": "Associar "
    },
    {
      "Animal": "Serpentes",
      "Medicação": "Xilazina",
      "Dose/mg/kg": "0,1 - 1 IM SC IV",
      "doseMin": 0.1,
      "doseMax": 1,
      "Uso": "Anestésico",
      "Notas": "Associar "
    },
    {
      "Animal": "Serpentes",
      "Medicação": "Midazolam",
      "Uso": "Anestésico",
      "Notas": "Associar "
    },
    {
      "Animal": "Serpentes",
      "Medicação": "Tramadol",
      "Uso": "Analgésico"
    },
    {
      "Animal": "Serpentes",
      "Medicação": "Meloxicam",
      "Uso": "Anestésico",
      "Concentração": 2 
    },
    {
      "Animal": "Serpentes",
      "Medicação": "Dexametasona",
      "Uso": "Antiinflamatório",
      "Notas": "Traumas"
    },
    {
      "Animal": "Serpentes",
      "Medicação": "Dipirona",
      "Uso": "Analgésico/Antiiinf."
    },
    {
      "Animal": "Cágado e Jabuti",
      "Medicação": "Acepromazina",
      "Dose/mg/kg": "0,25 - 0,5 IM",
      "doseMin": 0.25,
      "doseMax": 0.5,
      "Uso": "Anestésico"
    },
    {
      "Animal": "Cágado e Jabuti",
      "Medicação": "Cetamina",
      "Dose/mg/kg": "20 - 60 IM",
      "doseMin": 20,
      "doseMax": 60,
      "Uso": "Anestésico",
      "Notas": "Recuperação lenta"
    },
    {
      "Animal": "Cágado e Jabuti",
      "Medicação": "Cetamina + Midazolam",
      "Dose/mg/kg": "20 - 40c + 2m IM",
      "Uso": "Anestésico",
      "Notas": "Boa sedação e relaxamento muscular"
    },
    {
      "Animal": "Cágado e Jabuti",
      "Medicação": "Tramadol",
      "Uso": "Analgésico"
    },
    {
      "Animal": "Cágado e Jabuti",
      "Medicação": "Cetamina + Diazepam",
      "Dose/mg/kg": "60 - 80c + 0,2 - 1d IM",
      "Uso": "Anestésico",
      "Notas": "Bom relaxamento muscular"
    },
    {
      "Animal": "Cágado e Jabuti",
      "Medicação": "Lidocaína",
      "Dose/mg/kg": "0,5 ou 2%",
      "doseMin": 0.5,
      "Uso": "Anestésico",
      "Notas": "Local"
    },
    {
      "Animal": "Cágado e Jabuti",
      "Medicação": "Meloxicam",
      "Dose/mg/kg": "0,1 - 0,2 IM",
      "doseMin": 0.1,
      "doseMax": 0.2,
      "Uso": "Analgésico/Antiiinf.",
      "Concentração": 2 
    },
    {
      "Animal": "Cágado e Jabuti",
      "Medicação": "Dexametasona",
      "Dose/mg/kg": "2 -4 IM IV",
      "doseMin": 2,
      "doseMax": 4,
      "Uso": "Antiinflamatório",
      "Notas": "Traumas, choque"
    },
    {
      "Animal": "Gambá e Cuica",
      "Medicação": "Acepromazina",
      "Dose/mg/kg": "0,1 - 0,5 VO SC",
      "doseMin": 0.1,
      "doseMax": 0.5,
      "Uso": "Anestésico",
      "Notas": "Tranquilizante"
    },
    {
      "Animal": "Gambá e Cuica",
      "Medicação": "Dexametasona",
      "Dose/mg/kg": "0,2 IM IV SC",
      "doseMin": 0.2,
      "Uso": "Antiinflamatório",
      "Notas": "Dose para choque até 2 mg/kg"
    },
    {
      "Animal": "Gambá e Cuica",
      "Medicação": "Cetamina",
      "Dose/mg/kg": "30 - 50 IM",
      "doseMin": 30,
      "doseMax": 50,
      "Uso": "Anestésico",
      "Notas": "Associar "
    },
    {
      "Animal": "Gambá e Cuica",
      "Medicação": "Meloxicam",
      "Dose/mg/kg": "0,1 - 0,2 VO SC",
      "doseMin": 0.1, 
      "doseMax":0.2,  
      "Uso": "Analgésico/Antiiinf.",
      "Concentração": 2 
    },
    {
      "Animal": "Gambá e Cuica",
      "Medicação": "Midazolam",
      "Dose/mg/kg": "0,5 - 1 IM",
      "doseMin": 0.5,
      "doseMax": 1,
      "Uso": "Anestésico",
      "Notas": "Associar "
    },
    {
      "Animal": "Gambá e Cuica",
      "Medicação": "Tramadol",
      "Dose/mg/kg": "2 - 6 IM SC VO",
      "doseMin": 2,
      "doseMax": 6,
      "Uso": "Analgésico ",
      "Notas": "Associar com dipirona"
    },
    {
      "Animal": "Gambá e Cuica",
      "Medicação": "Dipirona",
      "Uso": "Analgésico"
    },
    {
      "Animal": "Tamanduás e Tatus",
      "Medicação": "Cetamina + Midazolam",
      "Dose/mg/kg": "5 - 10c + 0,2m IM",
      "Uso": "Anestésico",
      "Notas": "Procedimentos rápidos - Tem reversor - Flumazenil 0,01 - 0,02"
    },
    {
      "Animal": "Tamanduás e Tatus",
      "Medicação": "Dipirona",
      "Uso": "Analgésico"
    },
    {
      "Animal": "Tamanduás e Tatus",
      "Medicação": "Tramadol",
      "Uso": "Analgésico"
    },
    {
      "Animal": "Tamanduás e Tatus",
      "Medicação": "Dexametasona",
      "Uso": "Antiinflamatório"
    },
    {
      "Animal": "Tamanduás e Tatus",
      "Medicação": "Meloxicam",
      "Uso": "Analgésico/Antiiinf.",
      "Concentração": 2 
    },
    {
      "Animal": "Primatas",
      "Medicação": "Acepromazina",
      "Dose/mg/kg": "0,5 - 1 VO SC IM",
      "doseMin": 0.5,
      "doseMax": 1,
      "Uso": "Anestésico",
      "Notas": "Tranquilizante"
    },
    {
      "Animal": "Primatas",
      "Medicação": "Cetamina",
      "doseMin": 10,
      "doseMax": 20,
      "Dose/mg/kg": "10 - 20 IM",
      "Uso": "Anestésico",
      "Notas": "Tranquilizante e neuroleptoanalgesia"
    },
    {
      "Animal": "Primatas",
      "Medicação": "Cetamina + Diazepam",
      "Dose/mg/kg": "15c - 1d IM",
      "Uso": "Anestésico",
      "Notas": "Sedação"
    },
    {
      "Animal": "Primatas",
      "Medicação": "Diazepam",
      "Dose/mg/kg": "0,5 - 1 VO IM IV",
      "doseMin": 0.5,
      "doseMax": 1,
      "Uso": "Anestésico",
      "Notas": "Metade da dose para anticonvulsivante"
    },
    {
      "Animal": "Primatas",
      "Medicação": "Midazolam",
      "Dose/mg/kg": "0,1 - 0,5 IM",
      "doseMin": 0.1,
      "doseMax": 0.5,
      "Uso": "Anestésico",
      "Notas": "Sedação e relaxamento muscular"
    },
    {
      "Animal": "Primatas",
      "Medicação": "Dexametasona",
      "Dose/mg/kg": "2 VO IM IV",
      "doseMin": 2,
      "Uso": "Antiinflamatório"
    },
    {
      "Animal": "Primatas",
      "Medicação": "Ibuprofeno",
      "Dose/mg/kg": "20 VO",
      "doseMin": 20,
      "Uso": "Analgésico/Antiiinf."
    },
    {
      "Animal": "Primatas",
      "Medicação": "Meloxicam",
      "Uso": "Analgésico/Antiiinf.",
      "Concentração": 2 
    },
    {
      "Animal": "Primatas",
      "Medicação": "Tramadol",
      "Uso": "Analgésico"
    },
    {
      "Animal": "Primatas",
      "Medicação": "Dipirona",
      "Uso": "Analgésico"
    },
    {
      "Animal": "Canidae",
      "Medicação": "Cetamina",
      "Dose/mg/kg": "7 - 10 IM",
      "doseMin": 7,
      "doseMax": 10,
      "Uso": "Anestésico",
      "Notas": "Associar com Midazolam"
    },
    {
      "Animal": "Canidae",
      "Medicação": "Midazolam",
      "Dose/mg/kg": "0,3 - 0,5 IM",
      "doseMin": 0.3,
      "doseMax": 0.5,
      "Uso": "Anestésico",
      "Notas": "Associar com Cetamina"
    },
    {
      "Animal": "Canidae",
      "Medicação": "Tramadol",
      "Uso": "Analgésico"
    },
    {
      "Animal": "Canidae",
      "Medicação": "Dipirona",
      "Uso": "Analgésico"
    },
    {
      "Animal": "Canidae",
      "Medicação": "Dexametasona",
      "Uso": "Antiinflamatório"
    },
    {
      "Animal": "Canidae",
      "Medicação": "Lidocaína",
      "Uso": "Anestésico"
    },
    {
      "Animal": "Canidae",
      "Medicação": "Acepromazina",
      "Uso": "Anestésico"
    },
    {
      "Animal": "Canidae",
      "Medicação": "Meloxicam",
      "Uso": "Analgésico/Antiiinf.",
      "Concentração": 2 
    },
    {
      "Animal": "Felidae",
      "Medicação": "Cetamina",
      "Uso": "Anestésico"
    },
    {
      "Animal": "Felidae",
      "Medicação": "Midazolam",
      "Uso": "Anestésico"
    },
    {
      "Animal": "Felidae",
      "Medicação": "Tramadol",
      "Uso": "Analgésico"
    },
    {
      "Animal": "Felidae",
      "Medicação": "Dipirona",
      "Uso": "Analgésico"
    },
    {
      "Animal": "Felidae",
      "Medicação": "Dexametasona",
      "Uso": "Antiinflamatório"
    },
    {
      "Animal": "Felidae",
      "Medicação": "Lidocaína",
      "Uso": "Anestésico"
    },
    {
      "Animal": "Felidae",
      "Medicação": "Acepromazina",
      "Uso": "Anestésico"
    },
    {
      "Animal": "Felidae",
      "Medicação": "Meloxicam",
      "Uso": "Analgésico/Antiiinf.",
      "Concentração": 2 
    },
    {
      "Animal": "Ariranha, Lontra e Irara",
      "Medicação": "Acepromazina",
      "Dose/mg/kg": "0,1 - 0,3 IM SC VO",
       "doseMin": 0.1,
      "doseMax": 0.3,
      "Uso": "Anestésico",
      "Notas": "Tranquilizante"
    },
    {
      "Animal": "Ariranha, Lontra e Irara",
      "Medicação": "Cetamina",
      "Dose/mg/kg": "10 - 20 IM ",
       "doseMin": 10,
      "doseMax": 20,
      "Uso": "Anestésico",
      "Notas": "Usar associado"
    },
    {
      "Animal": "Ariranha, Lontra e Irara",
      "Medicação": "Cetamina + Acepromazina",
      "Dose/mg/kg": "10 - 20c + 0,05 - 0,3a IM",
      "Uso": "Anestésico",
      "Notas": "Funciona bem quando IM"
    },
    {
      "Animal": "Ariranha, Lontra e Irara",
      "Medicação": "Cetamina + Midazolam",
      "Dose/mg/kg": "10c + 0,25m IM",
      "Uso": "Anestésico",
      "Notas": "Contenção curta duração - pode ocorrer taquicardia"
    },
    {
      "Animal": "Ariranha, Lontra e Irara",
      "Medicação": "Meloxicam",
      "Uso": "Analgésico/Antiinf.",
      "Concentração": 2 
    },
    {
      "Animal": "Ariranha, Lontra e Irara",
      "Medicação": "Dipirona",
      "Uso": "Analgésico"
    },
    {
      "Animal": "Ariranha, Lontra e Irara",
      "Medicação": "Dexametasona",
      "Uso": "Antiinflamatório"
    },
    {
      "Animal": "Ariranha, Lontra e Irara",
      "Medicação": "Tramadol",
      "Uso": "Analgésico"
    },
    {
      "Animal": "Quati, Mão Pelada e Jupará",
      "Medicação": "Cetamina + Midazolam",
      "Dose/mg/kg": "7c + 0,5 - 1m IM",
      "Uso": "Anestésico",
      "Notas": "Captura, manipulação, sedação com retorno calmo"
    },
    {
      "Animal": "Quati, Mão Pelada e Jupará",
      "Medicação": "Meloxicam",
      "Uso": "Analgésico/Antiiinf.",
      "Concentração": 2 
    },
    {
      "Animal": "Quati, Mão Pelada e Jupará",
      "Medicação": "Dipirona",
      "Uso": "Analgésico"
    },
    {
      "Animal": "Quati, Mão Pelada e Jupará",
      "Medicação": "Dexametasona",
      "Uso": "Antiinflamatório"
    },
    {
      "Animal": "Quati, Mão Pelada e Jupará",
      "Medicação": "Acepromazina",
      "Uso": "Anestésico"
    },
    {
      "Animal": "Quati, Mão Pelada e Jupará",
      "Medicação": "Tramadol",
      "Uso": "Analgésico"
    },
    {
      "Animal": "Antas",
      "Medicação": "Tiletamina - zolazepam + Cetamina + Atropina + Medetomidina",
      "Uso": "Anestésico",
      "Notas": "Protocolo para dardos, em ordem - 1,25 - 0,83tz; 0,62 - 0,41c; 0,025 - 0,04a; 0,006 - 0,004mdt/ Atipemazol para recuperação após 30 min dose de 0,06mg/kg"
    },
    {
      "Animal": "Antas",
      "Medicação": "Tiletamina - zolazepam",
      "Dose/mg/kg": "6 IM",
      "doseMin": 6,
      "Uso": "Anestésico"
    },
    {
      "Animal": "Antas",
      "Medicação": "Dexametasona",
      "Uso": "Antiinflamatório"
    },
    {
      "Animal": "Antas",
      "Medicação": "Meloxicam",
      "Uso": "Analgésico/Antiiinf.",
      "Concentração": 2 
    },
    {
      "Animal": "Antas",
      "Medicação": "Butorfanol ",
      "Uso": "Anestésico"
    },
    {
      "Animal": "Queixada, Cateto e Javali",
      "Medicação": "Cetamina + Midazolam",
      "Dose/mg/kg": "10 - 30c + 0,3 - 0,5m",
      "Uso": "Anestésico"
    },
    {
      "Animal": "Queixada, Cateto e Javali",
      "Medicação": "Dexametasona",
      "Uso": "Antiinflamatório"
    },
    {
      "Animal": "Queixada, Cateto e Javali",
      "Medicação": "Meloxicam",
      "Uso": "Analgésico/Antiiinf.",
      "Concentração": 2 
    },
    {
      "Animal": "Queixada, Cateto e Javali",
      "Medicação": "Tramadol",
      "Uso": "Analgésico"
    },
    {
      "Animal": "Cervidae",
      "Medicação": "Cetamina",
      "Uso": "Anestésico"
    },
    {
      "Animal": "Cervidae",
      "Medicação": "Midazolam",
      "Uso": "Anestésico"
    },
    {
      "Animal": "Cervidae",
      "Medicação": "Meloxicam",
      "Uso": "Analgésico/Antiinf.",
      "Concentração": 2 
    },
    {
      "Animal": "Cervidae",
      "Medicação": "Dexametasona",
      "Uso": "Antiinflamatório"
    },
    {
      "Animal": "Cervidae",
      "Medicação": "Tramadol",
      "Uso": "Analgésico"
    },
    {
      "Animal": "Capivara, Paca, Cutia e Ouriço",
      "Medicação": "Extrapolação alometrica com domésticos"
    },
    {
      "Animal": "Lebre e Tapiti",
      "Medicação": "Acepromazina",
      "Dose/mg/kg": "0,5 - 2 IM SC",
      "doseMin": 0.5,
      "doseMax": 2,
      "Uso": "Anestésico"
    },
    {
      "Animal": "Lebre e Tapiti",
      "Medicação": "Cetamina + Acepromazina",
      "Dose/mg/kg": "75 + 5 ou 50 + 1 IM",
      "Uso": "Anestésico"
    },
    {
      "Animal": "Lebre e Tapiti",
      "Medicação": "Cetoprofeno",
      "Dose/mg/kg": "1 - 3 IM SC",
       "doseMin": 1,
      "doseMax": 3,
      "Uso": "Antiinflamatório"
    },
    {
      "Animal": "Lebre e Tapiti",
      "Medicação": "Meloxicam",
      "Dose/mg/kg": "0,1 - 0,3 IM SC VO",
       "doseMin": 0.1,
      "doseMax": 0.3,
      "Uso": "Analgésico/Antiiinf.",
      "Concentração": 2 
    },
    {
      "Animal": "Lebre e Tapiti",
      "Medicação": "Midazolam",
      "Dose/mg/kg": "0,5 - 2 IV IM IP Intranasal",
       "doseMin": 0.5,
      "doseMax": 2,
      "Uso": "Anestésico"
    },
    {
      "Animal": "Lebre e Tapiti",
      "Medicação": "Dipirona",
      "Uso": "Analgésico"
    },
    {
      "Animal": "Lebre e Tapiti",
      "Medicação": "Tramadol",
      "Uso": "Analgésico"
    },
    {
      "Animal": "Lebre e Tapiti",
      "Medicação": "Dexametasona",
      "Uso": "Antiinflamatório"
    },
    {
      "Animal": "Arara, PEA, Maracanã, Gaviões e geral",
      "Medicação": "Cetamina",
      "Dose/mg/kg": "10 - 40 IM SC e intranasal",
       "doseMin": 10,
      "doseMax": 40,
      "Uso": "Anestésico",
      "Nota": "Associar com midazolam"
  },
  {
    "Animal": "Arara, PEA, Maracanã, Gaviões e geral",
      "Medicação": "Midazolam",
      "Dose/mg/kg": "0,1 - 0,4 IM SC e intranasal",
       "doseMin": 0.1,
      "doseMax": 0.4,
      "Uso": "Anestésico",
      "Nota": "Associar com cetamina"
  },
  {
    "Animal": "Arara, PEA, Maracanã, Gaviões e geral",
      "Medicação": "Meloxicam",
      "Dose/mg/kg": "0,5 IM",
      "doseMin": 0.5,
      "Uso": "Anestésico",
      "Nota": "Associar com midazolam",
      "Concentração": 2   
  },
  {
    "Animal": "Arara, PEA, Maracanã, Gaviões e geral",
      "Medicação": "Dexametasona",
      "Dose/mg/kg": "0,2 - 1 IM SC",
       "doseMin": 0.2,
      "doseMax": 1,
      "Uso": "Antiinflamatório",
      "Nota": "sem notas"
            }
           
        ];

  // Variável global para sabermos o que está sendo exibido
let listaExibida = [...minhaPlanilha];
function renderizarBulario(dados) {
        const container = document.getElementById('lista-bulario');
        // ATUALIZA A LISTA QUE ESTÁ NA TELA
        listaAtual = dados; 
        
        container.innerHTML = dados.map((m, i) => `
            <div class="card">
                <div style="display:flex; justify-content:space-between; align-items:start">
                    <h3>${m["Medicação"]}</h3>
                    <span class="animal-tag">${m["Animal"]}</span>
                </div>
                <div class="info-row">
                    ${m["Uso"] || 'GERAL'} • <i>${m["Notas"] || ''}</i>
                </div>
                <div class="dose-ref">
                    DOSE: ${m.doseMax ? m.doseMin + ' - ' + m.doseMax : m.doseMin} mg/kg
                </div>
                <div class="grid-inputs">
                    <div class="full-col">
                        <label>Peso do Animal (kg)</label>
                        <input type="number" id="p-${i}" step="0.001" oninput="calc(${i})" placeholder="0.300">
                    </div>
                    <div>
                        <label>Conc. Frasco (mg/ml)</label>
                        <input type="number" id="c-${i}" value="${m.conc || ''}" oninput="calc(${i})" placeholder="mg/ml">
                    </div>
                    <div class="res-box">
                        <label style="color:#a855f7; font-size:8px">Volume (ml)</label>
                        <span class="res-val" id="r-${i}">0.000</span>
                    </div>
                    <div class="dica"> Dica: 10% = 100mg | 1% = 10mg | 0.2% = 2mg</div>
                </div>
            </div>
        `).join('');
    }

    function calc(i) {
        const item = listaAtual[i];
        const p = parseFloat(document.getElementById(`p-${i}`).value);
        const c = parseFloat(document.getElementById(`c-${i}`).value);
        const res = document.getElementById(`r-${i}`);

        if (p > 0 && c > 0) {
            // CÁLCULO PRECISO
            let mMin = (p * item.doseMin) / c;
            
            if (item.doseMax && item.doseMax > 0) {
                let mMax = (p * item.doseMax) / c;
                res.innerText = mMin.toFixed(3) + " - " + mMax.toFixed(3);
            } else {
                res.innerText = mMin.toFixed(3);
            }
            res.style.color = "#a855f7";
        } else { 
            res.innerText = "0.000"; 
            res.style.color = "white";
        }
    }

    function filtrarBulario() {
        const t = document.getElementById('busca').value.toLowerCase();
        const filtrados = minhaPlanilha.filter(m => 
            (m["Animal"]||"").toLowerCase().includes(t) || 
            (m["Medicação"]||"").toLowerCase().includes(t)
        );
        renderizarBulario(filtrados);
    }

    // CORREÇÃO DA CALCULADORA LARANJA (ABA 2)
    function calcGeral() {
        const p = parseFloat(document.getElementById('pesoG').value);
        const d = parseFloat(document.getElementById('doseG').value);
        const c = parseFloat(document.getElementById('concG').value);
        const display = document.getElementById('resGeral');
        const container = document.getElementById('resGeralCont');

        if(p > 0 && d > 0 && c > 0) {
            const resultado = (p * d) / c;
            container.style.display = "block";
            display.innerHTML = resultado.toFixed(3) + " <span style='font-size:16px'>ml</span>";
        } else {
            alert("Preencha todos os campos com valores válidos");
        }
    }

    function mudarAba(aba) {
        document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active-content'));
        document.querySelectorAll('nav button').forEach(b => {
            b.classList.remove('active-bulario', 'active-calculadora', 'active-premium');
        });
        document.getElementById(aba).classList.add('active-content');
        document.getElementById('btn-' + aba).classList.add('active-' + aba);
        window.scrollTo(0,0);
    }

    // Inicialização
    renderizarBulario(minhaPlanilha);

    if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
            navigator.serviceWorker.register('./sw.js')
                .then(reg => console.log("Porteiro Offline Ativo!"))
                .catch(err => console.log("Erro ao registrar:", err));
        });
    }
</script>
</body>
</html>

